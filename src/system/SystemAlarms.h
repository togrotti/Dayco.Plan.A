/****************************************************************************/
/* Project: Ax-Zynq Control Board                                           */
/*                                                                          */
/* Copyright Â© 2021, Ningbo Physis Technology Co.,Ltd. All Rights Reserved. */
/*                                                                          */
/* File        : SystemAlarms.h                                             */
/* Author      : Fabio Terrile                                              */
/*                                                                          */
/* Description : Global alarms definitions                                  */
/*                                                                          */
/****************************************************************************/

#ifndef _SYSTEMALARMS_H
#define _SYSTEMALARMS_H

#include "common\DefineExternals.h"

//***************************************************************************
// Global system alarms

#define SYSTEMALARMS_BIT_SOFTWARE_FAIL              (0x00000001l)
#define SYSTEMALARMS_SUBCODE_SF_TM_SYNCPOINT_TIMEOUT    (0x00010000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_SLOWTASK_RUNNING     (0x00020000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_SLOWTASK_OVERTIME    (0x00040000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_FPGA_WDT_FAIL        (0x00080000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_FPGA_CRC_FAIL        (0x00100000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_FPGA_LOCKOUT         (0x00200000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_FPGA_PLLLOSSOFLOCK   (0x00400000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_IOEXP_WDT            (0x00800000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_ADC_WDT_EXPIRED      (0x01000000l)
#define SYSTEMALARMS_SUBCODE_SF_TM_PSU_WDT              (0x02000000l)

#define SYSTEMALARMS_BIT_PLC_OVERTIME               (0x00000002l)
#define SYSTEMALARMS_SUBCODE_PLC_SLOWOVERTIME           (0x00000001l)
#define SYSTEMALARMS_SUBCODE_PLC_FASTOVERTIME           (0x00000002l)
#define SYSTEMALARMS_SUBCODE_PLC_INVALID_DSP            (0x00000004l)
#define SYSTEMALARMS_SUBCODE_PLC_COMDBERRMASK           (0x00008000l)
#define SYSTEMALARMS_SUBCODE_PLC_DSP_OVERTIME           (0x00010000l)

#define SYSTEMALARMS_BIT_BOOT_FAIL                  (0x00000004l)

#define SYSTEMALARMS_BIT_BOOT_FAIL_FOR_INVALID_PAR  (0x00000008l)

#define SYSTEMALARMS_BIT_HW_POWERSECTION_FAIL       (0x00000010l)
#define SYSTEMALARMS_SUBCODE_PS_BRIDGE1                 (0x00000001l)

#define SYSTEMALARMS_BIT_HW_FLASH_FAIL              (0x00000020l)
#define SYSTEMALARMS_SUBCODE_HF_FLASH_SYSLOG            (0x00000001l)
#define SYSTEMALARMS_SUBCODE_HF_FLASH_PARAMS            (0x00000002l)
#define SYSTEMALARMS_SUBCODE_HF_FLASH_HWCONFIG          (0x00000004l)

#define SYSTEMALARMS_BIT_HW_SAFETORQUEOFF           (0x00000040l)

#define SYSTEMALARMS_BIT_MOTOR_FAIL                 (0x00000080l)
#define SYSTEMALARMS_SUBCODE_MT_MISSINGMOTORPHASE       (0x00000001l)
#define SYSTEMALARMS_SUBCODE_MT_MOTORBLOCKED            (0x00000002l)
#define SYSTEMALARMS_SUBCODE_MT_OVERSPEED               (0x00000004l)

#define SYSTEMALARMS_BIT_CURRENT_FAIL               (0x00000100l)
#define SYSTEMALARMS_SUBCODE_CR_BRIDGE1                 (0x00000001l)

#define SYSTEMALARMS_BIT_VL_OVERVOLTAGE_FAIL        (0x00000200l)

#define SYSTEMALARMS_BIT_VL_UNDERVOLTAGE_FAIL       (0x00000400l)
#define SYSTEMALARMS_SUBCODE_VLU_ACLINEFAILURE          (0x00000001l)

#define SYSTEMALARMS_BIT_ENCODERMANAGER_FAIL        (0x00008000l)
#define SYSTEMALARMS_SUBCODE_ENCMGR_ABSRELDIFFFAIL      (0x00000001l)
#define SYSTEMALARMS_SUBCODE_ENCMGR_VENCFAIL            (0x00000002l)
#define SYSTEMALARMS_SUBCODE_ENCMGR_EFSFAIL             (0x00000004l)
#define SYSTEMALARMS_SUBCODE_ENCMGR_AUXENDATNOTPRESENT  (0x00000008l)
#define SYSTEMALARMS_SUBCODE_ENCMGR_HIPERFACENOTPRESENT (0x00000010l)
#define SYSTEMALARMS_SUBCODE_ENCMGR_SINCOSHWINCOMPAT    (0x00000020l)

#define SYSTEMALARMS_SUBCODE_ENC_MAIN                   (0x00000000l)
#define SYSTEMALARMS_SUBCODE_ENC_AUX                    (0x00008000l)

#define SYSTEMALARMS_SUBCODE_ENCMGR_BISS                (0x00010000l)
#define SYSTEMALARMS_SUBCODE_BISS_INIT                  (0x00010001l)
#define SYSTEMALARMS_SUBCODE_BISS_OVERTIME              (0x00010002l)
#define SYSTEMALARMS_SUBCODE_BISS_CRCERROR              (0x00010004l)
#define SYSTEMALARMS_SUBCODE_BISS_ALARM                 (0x00010008l)

#define SYSTEMALARMS_BIT_EN_ENDAT_FAIL              (0x00010000l)
#define SYSTEMALARMS_SUBCODE_ENDAT_INIT                 (0x00000001l)
#define SYSTEMALARMS_SUBCODE_ENDAT_ALARM                (0x00000002l)
#define SYSTEMALARMS_SUBCODE_ENDAT_CRC                  (0x00000004l)
#define SYSTEMALARMS_SUBCODE_ENDAT_OVERTIME             (0x00000008l)
#define SYSTEMALARMS_SUBCODE_ENDAT_INIT_ADDINFO         (0x00000010l)
#define SYSTEMALARMS_SUBCODE_ENDAT_CRC_ADDINFO          (0x00000020l)

#define SYSTEMALARMS_BIT_EN_SINCOS_FAIL             (0x00020000l)
#define SYSTEMALARMS_SUBCODE_SC_INV_LINE_COUNT          (0x00000001l)
#define SYSTEMALARMS_SUBCODE_SC_ENCODER_LEVEL           (0x00000002l)

#define SYSTEMALARMS_BIT_EN_INCREMENTAL_FAIL        (0x00040000l)
#define SYSTEMALARMS_SUBCODE_IN_INV_LINE_COUNT          (0x00000001l)
#define SYSTEMALARMS_SUBCODE_IN_ENCODER_LEVEL           (0x00000002l)
#define SYSTEMALARMS_SUBCODE_IN_FPGA_FAULT              (0x00000004l)
#define SYSTEMALARMS_SUBCODE_IN_SIM_MAXDIFFEXCEED       (0x00000008l)
#define SYSTEMALARMS_SUBCODE_IN_ANDIG_FAULT             (0x00000010l)
#define SYSTEMALARMS_SUBCODE_IN_FILTER_WDT              (0x00000020l)

#define SYSTEMALARMS_BIT_EN_HALLSENSORS_FAIL        (0x00080000l)
#define SYSTEMALARMS_SUBCODE_HL_INV_LINE_COUNT          (0x00000001l)
#define SYSTEMALARMS_SUBCODE_HL_INVALID_STATE           (0x00000002l)
#define SYSTEMALARMS_SUBCODE_HL_INVALID_DELTA           (0x00000008l)

#define SYSTEMALARMS_BIT_TM_THERMALMODEL_FAIL       (0x00100000l)
#define SYSTEMALARMS_SUBCODE_NTC_IGBT_FAIL              (0x00000001l)
#define SYSTEMALARMS_SUBCODE_JUNCTION_OVERTEMP          (0x00000002l)
#define SYSTEMALARMS_SUBCODE_FAN_LOCKED                 (0x00000004l)
#define SYSTEMALARMS_SUBCODE_HEATSINK_OVERTEMP          (0x00000008l)
#define SYSTEMALARMS_SUBCODE_ONCHIP_OVERTEMP            (0x00000010l)

#define SYSTEMALARMS_BIT_EN_ACTIVEFRONTEND_FAIL     (0x00200000l)
#define SYSTEMALARMS_SUBCODE_ACTFRNTEND_AGLITCH         (0x00000001l)
#define SYSTEMALARMS_SUBCODE_ACTFRNTEND_SYNC_LOST       (0x00000002l)

#define SYSTEMALARMS_BIT_BE_BACKEMF_FAIL            (0x00400000l)
#define SYSTEMALARMS_SUBCODE_BACKEMF_KT_OUTOFRANGE      (0x00000001l)
#define SYSTEMALARMS_SUBCODE_BACKEMF_INV_MAGICNUMBER    (0x00000002l)
#define SYSTEMALARMS_SUBCODE_BACKEMF_SYNCLOST           (0x00000008l)
#define SYSTEMALARMS_SUBCODE_BACKEMF_AGLITCH            (0x00000010l)

#define SYSTEMALARMS_BIT_HW_BRAKE_FAIL              (0x00800000l)
#define SYSTEMALARMS_SUBCODE_BF_ALWAYS_ON               (0x00000001l)
#define SYSTEMALARMS_SUBCODE_BF_OVERPOWER               (0x00000002l)
#define SYSTEMALARMS_SUBCODE_BF_DESATURATION            (0x00000004l)

#define SYSTEMALARMS_BIT_MN_CAN_FAIL                (0x01000000l)

#define SYSTEMALARMS_BIT_ETHERCAT_FAIL              (0x02000000l)

#define SYSTEMALARMS_BIT_EN_HIPERFACE_FAIL          (0x04000000l)
#define SYSTEMALARMS_SUBCODE_HIPFC_INIT                 (0x00000001l)
#define SYSTEMALARMS_SUBCODE_HIPFC_ALARM                (0x00000002l)

#define SYSTEMALARMS_BIT_TM_MOTOR_OVERTEMPERATURE   (0x08000000l)
#define SYSTEMALARMS_SUBCODE_TM_MOTOR_OVERTEMP          (0x00000001l)
#define SYSTEMALARMS_SUBCODE_TM_MOTOR_I2T               (0x00000002l)

#define SYSTEMALARMS_BIT_USERDEFINED                (0x10000000l)

#define SYSTEMALARMS_BIT_EN_NIKON_FAIL              (0x20000000l)
#define SYSTEMALARMS_SUBCODE_NIKON_INIT                 (0x00000001l)
#define SYSTEMALARMS_SUBCODE_NIKON_ALARM                (0x00000002l)
#define SYSTEMALARMS_SUBCODE_NIKON_OVERTIME             (0x00000004l)

#define SYSTEMALARMS_BIT_EN_ETHERPMC_FAIL           (0x40000000l)
#define SYSTEMALARMS_SUBCODE_ETHERPMC_STARTMASTER       (0x00000001l)
#define SYSTEMALARMS_SUBCODE_ETHERPMC_PHYERROR          (0x00000002l)

#define SYSTEMALARMS_BIT_EN_TMGW_FAIL               (0x80000000l)
#define SYSTEMALARMS_SUBCODE_TMGW_INIT                  (0x00000001l)
#define SYSTEMALARMS_SUBCODE_TMGW_ALARM                 (0x00000002l)
#define SYSTEMALARMS_SUBCODE_TMGW_OVERTIME              (0x00000004l)

//****************************************************************************
// Unclearable alarm mask

#define SYSTEMALARMS_UNCLEARABLEALARMS              (SYSTEMALARMS_BIT_SOFTWARE_FAIL|SYSTEMALARMS_BIT_BOOT_FAIL|\
                                                     SYSTEMALARMS_BIT_BOOT_FAIL_FOR_INVALID_PAR|SYSTEMALARMS_BIT_PLC_OVERTIME)

//****************************************************************************
// Global system warnings

#define SYSTEMWARNINGS_LOCKEDBYBOOTERROR            (0x00000001l)
#define SYSTEMWARNINGS_ACCESSTOFORBIDDENAREA        (0x00000004l)
#define SYSTEMWARNINGS_SAFEMODESTARTUPREQUESTED     (0x00000008l)
#define SYSTEMWARNINGS_STARTWITHPOWERFAIL           (0x00000010l)
#define SYSTEMWARNINGS_UNDERVOLTAGE                 (0x00000020l)
#define SYSTEMWARNINGS_KT_OUTOFRANGE                (0x00000040l)
#define SYSTEMWARNINGS_INV_MAGICNUMBER              (0x00000080l)
#define SYSTEMWARNINGS_INVALIDPARAMETERS            (0x00000100l)
#define SYSTEMWARNINGS_SAFETORQUEOFFACTIVE          (0x00000200l)
#define SYSTEMWARNINGS_INV_IQFILTERSETUP            (0x00000400l)
#define SYSTEMWARNINGS_ACLINEFAILURE                (0x00000800l)
#define SYSTEMWARNINGS_DEFLUX_SPEEDNOTREACHABLE     (0x00001000l)
#define SYSTEMWARNINGS_SAVEANDRESETREQ              (0x00010000l)
#define SYSTEMWARNINGS_ENCBATTERY_FAILURE           (0x00020000l)
#define SYSTEMWARNINGS_SENSOR_FAILURE               (0x00040000l)

//****************************************************************************
// Globals

extern ULONG  ulSystemAlarms;
extern ULONG  ulSystemAlarmSubCode;
extern ULONG  ulSystemWarnings;

#endif
